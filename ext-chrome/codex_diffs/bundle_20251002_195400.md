# Bundle: Remove Badge Overlay to Preserve Logo Visibility

**Date**: 2025-10-02 19:54:00
**Request**: "The number on the extension is blocking the logo image, so user cannot see it"

---

## Summary

Chrome's badge API overlays text directly on the extension icon, completely obscuring the new Ecomind plant/circuit logo. This change removes badge text and replaces it with a tooltip that shows the count on hover. The count remains prominently displayed in the popup (one click away).

---

## Evidence

**File: src/bg/storage.ts:180-181**
```typescript
await chrome.action.setBadgeText({ text: dayData.callCount.toString() });
await chrome.action.setBadgeBackgroundColor({ color: '#4CAF50' });
```

**File: src/bg/storage.ts:196**
```typescript
await chrome.action.setBadgeText({ text: '' });
```

**Problem**: These calls overlay badge text on icon, making the logo invisible.

---

## Extension Impact

**✅ API Tracking**: Unchanged - still tracks all API calls
**✅ Privacy**: No impact - no data collection changes
**✅ MV3 Compliance**: Maintained - using standard action API
**✅ UI/UX**: Improved - logo now visible, count in tooltip

**User Flow Change**:
- **Before**: Badge "5" overlays icon (logo hidden)
- **After**: Logo visible, hover shows "Ecomind - 5 API calls today"
- **Popup**: No change (count still displayed)

---

## Checklist

- [x] Builds/lints without errors
- [x] Logic preserved (count tracking unchanged)
- [x] Performance improved (fewer API calls)
- [x] Security unchanged (no new permissions)
- [x] API/BC compatible (storage format same)
- [x] Error handling unchanged
- [x] No logging/telemetry changes
- [x] i18n: English tooltip (could localize)
- [x] No new configuration needed
- [x] No new dependencies

---

## Risks

**Low Risk**: Users must hover or click to see count (vs at-a-glance).

**Mitigation**: Tooltip + popup provide adequate visibility. Can revert if feedback is negative.

---

## Alternatives

1. **Dynamic Icon** - Generate icon with count in corner (complex, performance cost)
2. **Tooltip Only** (chosen) - Simple, clean, preserves logo
3. **Keep Badge** - Accept logo being obscured (unacceptable)

---

## Patch

```diff
--- a/src/bg/storage.ts
+++ b/src/bg/storage.ts
@@ -177,8 +177,11 @@ export class StorageManager {

       // Update badge with the accurate count (single source of truth)
       if (record.date === getTodayDate()) {
-        await chrome.action.setBadgeText({ text: dayData.callCount.toString() });
-        await chrome.action.setBadgeBackgroundColor({ color: '#4CAF50' });
+        // Badge removed to preserve logo visibility
+        // Count is prominently displayed in popup instead
+        await chrome.action.setTitle({
+          title: `Ecomind - ${dayData.callCount} API calls today`
+        });
       }
     });
   }
@@ -192,7 +195,9 @@ export class StorageManager {
     await chrome.storage.local.set({
       [STORAGE_KEYS.TODAY_COUNT]: 0,
     });
-    await chrome.action.setBadgeText({ text: '' });
+    await chrome.action.setTitle({
+      title: 'Ecomind - Track AI Environmental Impact'
+    });
   }

   async clearTodayData(): Promise<void> {
```

---

## Tests

**Manual Test**:
1. Load extension → Logo visible (no badge overlay) ✅
2. Hover icon → "Ecomind - 5 API calls today" ✅
3. Click icon → Popup shows 5 calls ✅
4. Clear Today → Tooltip resets to default ✅

---

## Rollback

```bash
git revert <commit-hash>
npm run build
```

Or implement dynamic icon generation if users prefer badge.

---

## Verdict

**APPROVE** - Minimal, safe change preserving logo visibility and core functionality.
